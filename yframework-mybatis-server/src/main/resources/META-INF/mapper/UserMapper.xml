<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cust.system.repository.UserRepository">
    <sql id="tableName">
        SYS_USER
    </sql>

    <sql id="tableAlias">
        <include refid="tableName"/>
        o
    </sql>

    <sql id="columns">
        o.ID AS id,
        o.CREATED_BY AS createdBy,
        o.CREATED_DATE AS createdDate,
        o.LAST_MODIFIED_BY AS lastModifiedBy,
        o.LAST_MODIFIED_DATE AS lastModifiedDate,
        o.ACTIVATED AS activated,
        o.LOGIN AS login,
        o.PASSWORD_HASH AS password,
        o.FIRST_NAME AS firstName,
        o.LAST_NAME AS lastName,
        o.EMAIL AS email,
        o.ADDRESS AS address,
        o.TELEPHONE AS telephone,
        o.LANG_KEY AS langKey,
        o.IMAGE_URL AS imageUrl,
        o.ACTIVATION_KEY AS activationKey,
        o.RESET_KEY AS resetKey,
        o.RESET_DATE AS resetDate
    </sql>

    <sql id="joinTables">
    </sql>

    <sql id="joinColumns">
    </sql>

    <sql id="conditions">
    </sql>

    <select id="findUserByLogin" parameterType="java.lang.String" resultType="com.cust.system.domain.User">
        SELECT
        <include refid="columns"/>
        FROM
        <include refid="tableAlias"/>
        WHERE
        o.LOGIN = #{login}
        AND o.ACTIVATED = '1'
    </select>

    <select id="findUserByEmail" parameterType="java.lang.String" resultType="com.cust.system.domain.User">
        SELECT
        <include refid="columns"/>
        FROM
        <include refid="tableAlias"/>
        WHERE
        o.EMAIL = #{email}
        AND o.ACTIVATED = '1'
    </select>

    <select id="findUserById" parameterType="java.lang.String" resultType="com.cust.system.domain.User">
        SELECT
        <include refid="columns"/>
        FROM
        <include refid="tableAlias"/>
        WHERE
        o.ID = #{id}
        AND o.ACTIVATED = '1'
    </select>

</mapper>
