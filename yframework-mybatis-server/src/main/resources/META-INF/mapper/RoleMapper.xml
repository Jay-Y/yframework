<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cust.system.repository.RoleRepository">
    <sql id="tableName">
        SYS_ROLE
    </sql>

    <sql id="tableAlias">
        <include refid="tableName"/>
        o
    </sql>

    <sql id="columns">
        o.ID AS id,
        o.CREATED_BY AS createdBy,
        o.CREATED_DATE AS createdDate,
        o.LAST_MODIFIED_BY AS lastModifiedBy,
        o.LAST_MODIFIED_DATE AS lastModifiedDate,
        o.ACTIVATED AS activated,
        o.NAME AS name,
        o.NAMEEN AS nameen,
        o.SCOPE AS scope,
        o.SORT AS sort,
        o.IS_SYS AS isSys,
        o.OFFICE_ID AS officeId
    </sql>

    <sql id="joinTables">
    </sql>

    <sql id="joinColumns">
    </sql>

    <sql id="conditions">
    </sql>

    <select id="findRolesByUserId" parameterType="java.lang.String" resultType="com.cust.system.domain.Role">
        SELECT
        <include refid="columns"/>
        FROM
        <include refid="tableAlias"/>
        LEFT JOIN SYS_USER_ROLE ur
        ON o.ID = ur.ROLE_ID
        WHERE
        ur.USER_ID = #{uid}
        AND o.ACTIVATED = '1'
        ORDER BY o.CREATED_DATE, o.ID
    </select>

    <select id="findAllRolesByName" parameterType="java.lang.String" resultType="com.cust.system.domain.Role">
        SELECT
        <include refid="columns"/>
        FROM
        <include refid="tableAlias"/>
        WHERE
        o.NAME = #{name}
        AND o.ACTIVATED = '1'
    </select>

    <select id="findAllRolesByNameen" parameterType="java.lang.String" resultType="com.cust.system.domain.Role">
        SELECT
        <include refid="columns"/>
        FROM
        <include refid="tableAlias"/>
        WHERE
        o.NAMEEN = #{nameen}
        AND o.ACTIVATED = '1'
    </select>

</mapper>
